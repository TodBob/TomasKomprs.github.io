var __extends=function(e,t){for(var r in t)__hasProp.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e},__hasProp={}.hasOwnProperty;$.ajaxPrefilter(function(e,t,r){var a,o,n,s;(function(){var e;e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e,!1}})()&&e.localCache&&(o=e.cacheTTL||5,a=e.cacheKey||e.url.replace(/jQuery.*/,"")+e.type+(e.data||""),e.isCacheValid&&!e.isCacheValid()&&localStorage.removeItem(a),(n=localStorage.getItem(a+"cachettl"))&&n<+new Date&&(localStorage.removeItem(a),localStorage.removeItem(a+"cachettl"),n="expired"),(s=localStorage.getItem(a))?(0===e.dataType.indexOf("json")&&(s=JSON.parse(s)),e.success(s),r.abort()):(e.success&&(e.realsuccess=e.success),e.success=function(t){var r,o;o=t,0===this.dataType.indexOf("json")&&(o=JSON.stringify(t));try{localStorage.setItem(a,o)}catch(t){r=t,localStorage.removeItem(a),localStorage.removeItem(a+"cachettl"),e.cacheError&&e.cacheError(r,a,o)}e.realsuccess&&e.realsuccess(t)},n&&"expired"!==n||localStorage.setItem(a+"cachettl",+new Date+36e5*o)))}),function(e){e.fn.reportCard=function(t){var r,a,o;return o=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},r=function(){function r(e){this.userName=e.userName,this.site=e.site,this.badgesAmount=e.badgesAmount,this.tooltips=e.tooltips}return r.prototype.build=function(r){var a,n,s;n=r.badges.slice(-t.badgesAmount),s=100/(n.length+1)+"%",a="<h2> "+r.badge_count+" lekcí a získal "+o(r.points_total)+" bodů na team "+r.site+'!</h2>\n<p>Podívejte se na některé z mých posledních kurzů s odznaky níže: </p>\n<ul class="badges">',n.forEach(function(e){return a+='<li style="width: '+s+';" title="'+e.label+'">\n  <a href="'+r.profile_url+'" target="_blank" data-toggle="tooltip" data-placement="top" >\n    <img src="'+e.icon_url+'" alt="'+e.label+'"/>\n  </a>\n</li>'}),a+="</ul>",t.$element.html(a),t.tooltips&&t.$element.each(function(t,r){return e(r).find("li").tooltip()})},r.prototype.transform=function(e){return e},r.prototype.getData=function(r){var a;return a=this,e.ajax({type:"GET",url:this.url,localCache:!0,cacheTTL:.5,cacheKey:"reportcard"+t.site+t.userName,dataType:r.dataType,crossDomain:!0,async:!0,beforeSend:function(){t.$element.html('<div class="spinner"></div>')},success:function(e){return a.build(a.transform(e))}})},r}(),a=function(e){function t(e){t.__super__.constructor.call(this,e),this.url="https://teamtreehouse.com/"+this.userName+".json"}return __extends(t,r),t.prototype.getData=function(){return t.__super__.getData.call(this,{dataType:"json"})},t.prototype.transform=function(e){return{site:"Treehouse",username:e.profile_name,profile_url:e.profile_url,points:e.points,points_total:e.points.total,badge_count:e.badges.length,badges:e.badges.map(function(e){return{courses:e.courses,course_count:e.courses.length,earned_date:Date.parse(e.earned_date),icon_url:e.icon_url,label:e.name,url:e.url}})}},t}(),t.$element=this,t.badgesAmount=t.badgesAmount?t.badgesAmount:5,t.userName||alert("You need to pass in a username"),t.site||alert("You need to pass in a site"),"treehouse"===t.site?new a(t).getData():"codeschool"===t.site?new(void 0)(t).getData():void 0}}(jQuery),$(".report-card.treehouse").reportCard({userName:"tomaskomprs",site:"treehouse",badgesAmount:7});